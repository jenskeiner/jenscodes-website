{{ define "main" }}
  {{- $project := index .Page.Params "_project" -}}
  {{- $version := index .Page.Params "_version" -}}
  {{- $params := index .Site.Params $project -}}
  {{- $menuName := index .Page.Params "_menu" -}}
  {{- if not $menuName -}}
    {{- $menuName = "lintr" -}}
  {{- end -}}
  {{- $menu := index .Site.Menus $menuName -}}
  <main class="flex flex-grow flex-col">
    <div class="container mx-auto px-4 pt-8">
      <div class="grid grid-cols-3 gap-4">
        <div class="col-span-1 hidden z-10 lg:block lg:relative">
          <nav
            id="documentation-menu"
            class="overflow-y-auto font-medium text-base lg:text-sm sticky top-4 max-h-[calc(100vh-6rem)]"
          >
            <ul>
              {{ range sort $menu "Weight" }}
                  <li class="pb-6">
                    {{ $render := $.IsMenuCurrent .Menu .}}
                    {{ if and (not $render) .HasChildren }}
                      {{ range .Children }}
                        {{ if $.IsMenuCurrent .Menu . }}
                          {{ $render = true }}
                        {{ end }}
                      {{ end }}
                    {{ end }}
                    <a
                      href="{{ .Page.RelPermalink }}"
                      class="text-2xl {{ if $render }}
                        text-green-500 dark:text-green-300
                      {{ end }}"
                      >{{ index (split .Name "|") 0 -}}</a
                    >
                    {{ if $render }}
                      {{ .Page.TableOfContents }}
                    {{ end }}
                  </li>
              {{ end }}
            </ul>
          </nav>
        </div>
      <!-- /Sidebar -->

      <!-- Content -->
        <div id="content" class="col-span-3 lg:col-span-2">
      <main
        id="docs"
        class="min-w-0 w-full lg:px-12 lg:flex-auto lg:static lg:max-h-full lg:overflow-visible"
        data-controller="clipboard"
      >
        <h1 class="doc-title">{{ index (split .Name "|") 0 -}}</h1>
        {{ .TableOfContents }}

        {{- $content := .Content -}}
        {{ $content = $content | replaceRE "(<h[1-9] id=\"([^\"]+)\".+)(</h[1-9]+>)" `${1} <a href="#${2}" class="header-link"
          aria-label="Permanent link">#</a> ${3}` | safeHTML
        }}
        {{ $content = $content | replaceRE "(<table[^>]*>(?:.|\n)+?</table>)" `<div class="table-wrapper">${1}</div>` | safeHTML }}
        {{ $content }}
      </main>
          </div>
      <!-- /Content -->
    </div>
  </div>
  </div>
  </main>
{{ end }}
